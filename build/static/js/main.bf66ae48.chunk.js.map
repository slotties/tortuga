{"version":3,"sources":["Navigation.js","Welcome.js","data/Characters.js","rules/oneLeader.js","rules/validateList.js","NewList.js","ManageLists.js","FactionChoice.js","App.js","index.js"],"names":["Navigation","className","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","to","Component","Welcome","characterById","Chars","chars","find","item","oneLeader","rules","list","filter","character","length","validateList","map","rule","error","NewList","addChar","updatedChars","errors","setChars","setErrors","setErrorsVisible","removeChar","removedIndex","_","index","typeNameOf","typeClassName","toLowerCase","characters","faction","factions","includes","charactersByFaction","useParams","sort","char1","char2","type1","type2","name","localeCompare","indexOf","useState","allChars","errorsVisible","initialCharIds","URLSearchParams","useLocation","search","get","useEffect","ids","items","c","replaceChars","split","CSSTransition","in","unmountOnExit","timeout","classNames","role","key","TransitionGroup","value","costs","onClick","bind","total","i","totalCostsOf","href","ManageLists","FactionChoice","App","basename","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bf66ae48.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Navigation extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"navbar navbar-expand-lg navbar-light\">\r\n          <div className=\"navbar-brand user-select-none\">Freebooter's Fate</div>\r\n          <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#headerNavigation\" aria-controls=\"headerNavigation\" aria-expanded=\"false\" aria-label=\"Navigation ein-/ausblenden\">\r\n            <span className=\"navbar-toggler-icon\"></span>\r\n          </button>\r\n          <div className=\"collapse navbar-collapse\" id=\"headerNavigation\">\r\n            <ul className=\"navbar-nav\">\r\n              <li className=\"nav-item\">\r\n                <Link to=\"/factionChoice\" className=\"nav-link user-select-none\">Neue Liste anlegen</Link>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <Link to=\"/lists\" className=\"nav-link user-select-none\">Listen verwalten</Link>\r\n              </li>\r\n            </ul>\r\n        </div>\r\n          \r\n        </div>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navigation;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Welcome() {\r\n  return (\r\n    <div>\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          Wilkommen bei Tortuga, einer Listenverwaltung für Freebooter's Fate!\r\n                </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          <div className=\"list-group\">\r\n            <Link to=\"/factionChoice\" className=\"list-group-item list-group-item-action\">Neue Liste anlegen</Link>\r\n            <Link to=\"/lists\" className=\"list-group-item list-group-item-action\">Meine Listen verwalten</Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Welcome;","import Chars from './characters_v1.json';\r\n\r\nfunction characterById(id) {\r\n    return Chars.chars.find((item) => {\r\n        return item.id === id\r\n    })\r\n}\r\n\r\nfunction charactersByFaction(faction) {\r\n    return Chars.chars.filter((item) => {\r\n        return item.factions.includes(faction)\r\n    })\r\n}\r\n\r\nexport {\r\n    characterById,\r\n    charactersByFaction\r\n}","function oneLeader(list) {\r\n    const leaders = list.filter((character) => character.type === 'A');\r\n\r\n    return leaders.length > 1 ? 'Nur ein Anführer ist erlaubt.' : null;\r\n}\r\n\r\nexport default oneLeader;","import oneLeader from './oneLeader'\r\n\r\nconst rules = [\r\n    oneLeader\r\n];\r\n\r\nfunction validateList(list) {\r\n    return rules.map((rule) => rule(list))\r\n        .filter((error) => error !== null);\r\n}\r\n\r\nexport default validateList;","import React, { useEffect, useState } from 'react';\r\nimport { characterById, charactersByFaction } from './data/Characters';\r\nimport validateList from './rules/validateList';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group'\r\nimport { useLocation, useParams } from 'react-router';\r\n\r\nconst TYPE_ORDER = 'ASG';\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction NewList() {\r\n    const sortByType = (char1, char2) => {\r\n        const type1 = char1.type;\r\n        const type2 = char2.type;\r\n\r\n        if (type1 === type2) {\r\n            return char1.name.localeCompare(char2.name);\r\n        }\r\n\r\n        const order1 = TYPE_ORDER.indexOf(type1);\r\n        const order2 = TYPE_ORDER.indexOf(type2);\r\n\r\n        return order1 < order2 ? -1 : 1;\r\n    };\r\n\r\n    const replaceChars = (ids) => {\r\n        const items = ids.map(characterById).filter(c => !!c);\r\n        const errors = validateList(items);\r\n\r\n        setChars(items);\r\n        setErrors(errors);\r\n        setErrorsVisible(errors.length > 0);\r\n    }\r\n\r\n    const addChar = (id) => {\r\n        const item = characterById(id)\r\n\r\n        const updatedChars = [...chars, item];\r\n        const errors = validateList(updatedChars);\r\n\r\n        setChars(updatedChars);\r\n        setErrors(errors);\r\n        setErrorsVisible(errors.length > 0);\r\n    };\r\n\r\n    const removeChar = (removedIndex) => {\r\n        const updatedChars = chars.filter((_, index) => {\r\n            return index !== removedIndex;\r\n        })\r\n\r\n        const errors = validateList(updatedChars);\r\n\r\n        setChars(updatedChars);\r\n        setErrors(errors);\r\n        setErrorsVisible(errors.length > 0);\r\n    };\r\n\r\n    const totalCostsOf = (chars) => {\r\n        let total = 0\r\n        for (let i = 0; i < chars.length; i++) {\r\n            total += chars[i].costs\r\n        }\r\n\r\n        return total\r\n    }\r\n\r\n    const typeNameOf = (type) => {\r\n        switch (type) {\r\n            case 'A':\r\n                return 'Anführer';\r\n            case 'S':\r\n                return 'Spezialist';\r\n            case 'G':\r\n                return 'Gefolge';\r\n            default:\r\n                return 'Unbekannt';\r\n        }\r\n    };\r\n\r\n    const typeClassName = (type) => {\r\n        return type ? ('t-type-' + type.toLowerCase()) : '';\r\n    };\r\n\r\n    let { faction } = useParams();\r\n    // TODO: handle faction = null\r\n\r\n    const characters = charactersByFaction(faction)\r\n    characters.sort(sortByType);\r\n\r\n    const [chars, setChars] = useState([]);\r\n    const [allChars] = useState(characters);\r\n    const [errors, setErrors] = useState([]);\r\n    const [errorsVisible, setErrorsVisible] = useState(false);\r\n\r\n    let initialCharIds = useQuery().get('chars');\r\n    useEffect(() => {\r\n        if (initialCharIds) {\r\n            replaceChars(initialCharIds.split(','));\r\n        }\r\n    }, [ initialCharIds ]);\r\n    \r\n    // TODO: sub-komponenten auslagern\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"row\">\r\n                <div className=\"col\">\r\n                    <h5 className=\"user-select-none\">Ausgewählte Charaktere</h5>\r\n                </div>\r\n            </div>\r\n\r\n            <CSSTransition in={errorsVisible} unmountOnExit timeout={250} classNames=\"alert\">\r\n                <div className=\"row\">\r\n                    <div className=\"col\">\r\n                        <div className=\"alert alert-danger\" role=\"alert\">\r\n                            Fehler:\r\n                            <ul>\r\n                                {errors.map((error, index) =>\r\n                                    <li key={index}>{error}</li>\r\n                                )}\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </CSSTransition>\r\n\r\n            <div className=\"row mb-4\">\r\n                <div className=\"col\">\r\n                    <ul className=\"list-group\">\r\n                        <TransitionGroup>\r\n                            {chars.map((value, index) =>\r\n                                <CSSTransition key={index} timeout={250} classNames=\"listChar\">\r\n                                    <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                                        <span className=\"mr-auto\">{value.name}</span>\r\n                                        <span className={`badge badge-primary badge-pill ${typeClassName(value.type)} m-2`}>{typeNameOf(value.type)}</span>\r\n                                        <span className=\"badge badge-primary badge-pill m-2\">{value.costs}</span>\r\n                                        <button type=\"button\" className=\"btn btn-danger\" onClick={removeChar.bind(this, index)}>X</button>\r\n                                    </li>\r\n                                </CSSTransition>\r\n                            )}\r\n                            <CSSTransition key=\"total\" timeout={250} classNames=\"listChar\">\r\n                                <li className=\"list-group-item d-flex justify-content-end bg-info text-light\">\r\n                                    <span className=\"mr-5\">Gesamt: { totalCostsOf(chars) }</span>                                \r\n                                </li>\r\n                            </CSSTransition>\r\n                        </TransitionGroup>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col\">\r\n                    <h5 className=\"user-select-none\">Charakter hinzufügen</h5>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col\">\r\n                    <div className=\"list-group\">\r\n                        {allChars.map((value) =>\r\n                            <a key={value.id} href=\"#\" className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\" onClick={addChar.bind(this, value.id)}>\r\n                                <span className=\"mr-auto\">{value.name}</span>\r\n                                <span className={`badge badge-primary badge-pill ${typeClassName(value.type)} m-2`}>{typeNameOf(value.type)}</span>\r\n                                <span className=\"badge badge-primary badge-pill m-2\">{value.costs}</span>\r\n                            </a>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default NewList;","import React, { Component } from 'react';\r\n\r\nclass ManageLists extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        TODO: Listen verwalten\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManageLists;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction FactionChoice() {\r\n    return (\r\n        <div>\r\n            <div className=\"row\">\r\n                <div className=\"col\">\r\n                    <h5 className=\"user-select-none\">Wähle eine Fraktion aus</h5>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col\">\r\n                    <div className=\"list-group\">\r\n                        <Link to=\"/new/AMA\" className=\"list-group-item list-group-item-action\">Amazonen</Link>\r\n                        <Link to=\"/new/ASS\" className=\"list-group-item list-group-item-action\">Bruderschaft</Link>\r\n                        <Link to=\"/new/DEB\" className=\"list-group-item list-group-item-action\">Debonn</Link>\r\n                        <Link to=\"/new/GOB\" className=\"list-group-item list-group-item-action\">Goblin Piraten</Link>\r\n                        <Link to=\"/new/IMP\" className=\"list-group-item list-group-item-action\">Imperiale Armada</Link>\r\n                        <Link to=\"/new/MYS\" className=\"list-group-item list-group-item-action\">Kult</Link>\r\n                        <Link to=\"/new/PIR\" className=\"list-group-item list-group-item-action\">Piraten</Link>\r\n                        <Link to=\"/new/SOL\" className=\"list-group-item list-group-item-action\">Söldner</Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FactionChoice;","import React from 'react';\r\nimport Navigation from './Navigation';\r\nimport Welcome from './Welcome';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route\r\n} from \"react-router-dom\";\r\nimport NewList from './NewList';\r\nimport ManageLists from './ManageLists';\r\nimport FactionChoice from './FactionChoice';\r\n\r\nfunction App() {\r\n  return (\r\n    <Router basename=\"/tortuga/build\">\r\n      <div className=\"container\">\r\n        <Navigation />\r\n\r\n        <Switch>\r\n          <Route path=\"/factionChoice\">\r\n            <FactionChoice />\r\n          </Route>\r\n          <Route path=\"/new/:faction\">\r\n            <NewList />\r\n          </Route>\r\n          <Route path=\"/lists\">\r\n            <ManageLists />\r\n          </Route>\r\n          <Route path=\"/\">\r\n            <Welcome />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\n// Bootstrap stuff\r\n// eslint-disable-next-line\r\nimport $ from 'jquery';\r\n// eslint-disable-next-line\r\nimport Popper from 'popper.js';\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './assets/style.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}